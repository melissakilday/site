---
export interface FAQItem {
  question: string;
  answer: string;
}

export interface Props {
  faqs: FAQItem[];
  pageUrl?: string;
}

const { faqs, pageUrl } = Astro.props;

// Generate FAQ Schema.org structured data
const faqSchema = {
  "@context": "https://schema.org",
  "@type": "FAQPage",
  "mainEntity": faqs.map(faq => ({
    "@type": "Question",
    "name": faq.question,
    "acceptedAnswer": {
      "@type": "Answer",
      "text": faq.answer
    }
  }))
};

// Add URL if provided
if (pageUrl) {
  faqSchema["@id"] = pageUrl;
}
---

<!-- FAQ Schema.org Structured Data -->
<script type="application/ld+json" set:html={JSON.stringify(faqSchema)}></script>

<!-- Visible FAQ Section -->
<section class="bg-[#F8F9FA] py-16">
  <div class="container-custom">
    <div class="max-w-4xl mx-auto">
      <div class="text-center mb-12">
        <h2 class="text-3xl font-bold mb-4">Frequently Asked Questions</h2>
        <p class="text-gray-700">
          Get answers to common questions about our services and booking process.
        </p>
      </div>
      
      <div class="space-y-6">
        {faqs.map((faq, index) => (
          <div class="bg-white rounded-lg shadow-sm border border-gray-100 overflow-hidden">
            <details class="group">
              <summary class="flex items-center justify-between p-6 cursor-pointer hover:bg-gray-50 transition-colors">
                <h3 class="font-semibold text-lg text-gray-900 pr-4">
                  {faq.question}
                </h3>
                <div class="flex-shrink-0">
                  <svg 
                    class="h-5 w-5 text-gray-500 group-open:rotate-45 transition-transform duration-200" 
                    xmlns="http://www.w3.org/2000/svg" 
                    width="24" 
                    height="24" 
                    viewBox="0 0 24 24" 
                    fill="none" 
                    stroke="currentColor" 
                    stroke-width="2" 
                    stroke-linecap="round" 
                    stroke-linejoin="round"
                  >
                    <path d="M12 5v14"></path>
                    <path d="M5 12h14"></path>
                  </svg>
                </div>
              </summary>
              
              <div class="px-6 pb-6">
                <div class="border-t border-gray-100 pt-4">
                  <p class="text-gray-700 leading-relaxed">
                    {faq.answer}
                  </p>
                </div>
              </div>
            </details>
          </div>
        ))}
      </div>
      
      <!-- Additional Help -->
      <div class="mt-12 text-center">
        <div class="bg-[#D3E4FD] bg-opacity-20 rounded-lg p-6">
          <h3 class="text-xl font-semibold mb-2">Have More Questions?</h3>
          <p class="text-gray-700 mb-4">
            Can't find the answer you're looking for? I'd be happy to help with any specific questions about your hair care needs.
          </p>
          <div class="flex gap-4 justify-center">
            <a 
              href="/contact" 
              class="bg-[#1EAEDB] text-white px-6 py-2 rounded-lg hover:bg-[#1EAEDB]/90 transition-colors"
            >
              Contact Me
            </a>
            <a 
              href="/booking" 
              class="bg-white text-[#1EAEDB] border border-[#1EAEDB] px-6 py-2 rounded-lg hover:bg-[#1EAEDB] hover:text-white transition-colors"
            >
              Book Consultation
            </a>
          </div>
        </div>
      </div>
    </div>
  </div>
</section>

<style>
  details summary::-webkit-details-marker {
    display: none;
  }
  
  details[open] summary {
    border-bottom: 1px solid #f3f4f6;
  }
  
  @media (max-width: 640px) {
    summary h3 {
      font-size: 1rem;
    }
    
    .container-custom {
      padding-left: 1rem;
      padding-right: 1rem;
    }
  }
</style>