---
// Import all CSS files for proper Astro processing
import '../styles/global.css';
import '../styles/image-optimization.css';
import Navbar from '../components/Navbar.astro';
import Footer from '../components/Footer.astro';
import LoadingSpinner from '../components/LoadingSpinner.astro';

export interface Props {
  title: string;
  description?: string;
  keywords?: string;
  ogImage?: string;
  canonicalURL?: string;
  pageType?: 'website' | 'article' | 'service';
}

const { 
  title, 
  description = 'Premium hairdresser in Kaukapakapa, Auckland. Expert hair coloring, keratin treatments, balayage & highlights. Serving Kaukapakapa, Helensville, Wainui & Waitoki. Book your transformation today!',
  keywords = 'hairdresser kaukapakapa, hair salon kaukapakapa, hair coloring auckland north, keratin treatment kaukapakapa, balayage helensville, highlights wainui, haircut waitoki, melissa hair salon, hair stylist north auckland',
  ogImage = 'https://hairbymelissa.co.nz/images/og-image.jpg',
  canonicalURL = new URL(Astro.url.pathname, 'https://hairbymelissa.co.nz').toString(),
  pageType = 'website'
} = Astro.props;

// Enhanced Structured Data for HairSalon with Specific Services
const localBusinessSchema = {
  "@context": "https://schema.org",
  "@type": ["HairSalon", "BeautySalon"],
  "@id": "https://hairbymelissa.co.nz/#business",
  "name": "Hair By Melissa",
  "alternateName": ["Melissa's Hair Salon", "Hair By Melissa Kaukapakapa"],
  "description": "Premium hair salon specializing in keratin treatments, balayage, highlights, and expert hair coloring in Kaukapakapa, Auckland. Serving North Auckland with professional hair services since 2020.",
  "url": "https://hairbymelissa.co.nz",
  "telephone": "+64275201613",
  "email": "book@hairbymelissa.co.nz",
  "foundingDate": "2020",
  "founder": {
    "@type": "Person",
    "name": "Melissa",
    "jobTitle": "Hair Stylist & Salon Owner"
  },
  "address": {
    "@type": "PostalAddress",
    "streetAddress": "Magnolia Lane",
    "addressLocality": "Kaukapakapa",
    "addressRegion": "Auckland",
    "postalCode": "0810",
    "addressCountry": "NZ"
  },
  "geo": {
    "@type": "GeoCoordinates",
    "latitude": -36.6173,
    "longitude": 174.4829
  },
  "image": [
    "https://hairbymelissa.co.nz/images/salon-exterior.jpg",
    "https://hairbymelissa.co.nz/images/salon-interior.jpg",
    "https://hairbymelissa.co.nz/images/hair-services-gallery.jpg"
  ],
  "logo": "https://hairbymelissa.co.nz/images/logo.png",
  "openingHoursSpecification": [
    {
      "@type": "OpeningHoursSpecification",
      "dayOfWeek": ["Tuesday", "Wednesday", "Thursday", "Friday"],
      "opens": "09:00",
      "closes": "17:00"
    },
    {
      "@type": "OpeningHoursSpecification",
      "dayOfWeek": "Saturday",
      "opens": "09:00",
      "closes": "15:00"
    }
  ],
  "priceRange": "$40-$230",
  "currenciesAccepted": "NZD",
  "paymentAccepted": ["Cash", "Credit Card", "EFTPOS", "Bank Transfer"],
  "areaServed": [
    {
      "@type": "City",
      "name": "Kaukapakapa",
      "containedInPlace": {
        "@type": "AdministrativeArea",
        "name": "Auckland Region"
      }
    },
    {
      "@type": "City", 
      "name": "Helensville",
      "containedInPlace": {
        "@type": "AdministrativeArea",
        "name": "Auckland Region"
      }
    },
    {
      "@type": "City",
      "name": "Wainui",
      "containedInPlace": {
        "@type": "AdministrativeArea", 
        "name": "Auckland Region"
      }
    },
    {
      "@type": "City",
      "name": "Waitoki",
      "containedInPlace": {
        "@type": "AdministrativeArea",
        "name": "Auckland Region"
      }
    }
  ],
  "hasOfferCatalog": {
    "@type": "OfferCatalog",
    "name": "Hair Services & Treatments",
    "itemListElement": [
      {
        "@type": "Offer",
        "@id": "https://hairbymelissa.co.nz/services/keratin-treatments#offer",
        "itemOffered": {
          "@type": ["Service", "HealthAndBeautyBusiness"],
          "serviceType": "Keratin Hair Treatment",
          "name": "Keratin Treatments",
          "description": "Professional keratin treatment that reduces frizz, adds incredible shine, and makes styling quick and easy. Formaldehyde-free formula lasts up to 5 months.",
          "category": "Hair Treatment",
          "duration": "PT2H30M",
          "serviceOutput": "Smooth, frizz-free hair with enhanced shine and manageability"
        },
        "price": "180",
        "priceCurrency": "NZD",
        "priceSpecification": {
          "@type": "PriceSpecification",
          "price": "180",
          "priceCurrency": "NZD",
          "valueAddedTaxIncluded": true
        },
        "availability": "https://schema.org/InStock",
        "validFrom": "2024-01-01",
        "url": "https://hairbymelissa.co.nz/services/keratin-treatments"
      },
      {
        "@type": "Offer",
        "@id": "https://hairbymelissa.co.nz/services/balayage#offer", 
        "itemOffered": {
          "@type": ["Service", "HealthAndBeautyBusiness"],
          "serviceType": "Balayage Hair Coloring",
          "name": "Balayage",
          "description": "Hand-painted highlighting technique that creates naturally sun-kissed hair with softer, less noticeable regrowth. Low-maintenance color option.",
          "category": "Hair Coloring",
          "duration": "PT3H30M",
          "serviceOutput": "Natural-looking dimensional color with soft regrowth"
        },
        "price": "230",
        "priceCurrency": "NZD",
        "priceSpecification": {
          "@type": "PriceSpecification",
          "price": "230",
          "priceCurrency": "NZD",
          "valueAddedTaxIncluded": true
        },
        "availability": "https://schema.org/InStock",
        "validFrom": "2024-01-01",
        "url": "https://hairbymelissa.co.nz/services/balayage"
      },
      {
        "@type": "Offer",
        "@id": "https://hairbymelissa.co.nz/services/full-head-highlights#offer",
        "itemOffered": {
          "@type": ["Service", "HealthAndBeautyBusiness"],
          "serviceType": "Hair Highlighting",
          "name": "Full Head of Highlights",
          "description": "Complete transformation with highlights applied throughout entire head for maximum impact and dimension. Includes custom toner and styling.",
          "category": "Hair Coloring",
          "duration": "PT2H45M",
          "serviceOutput": "Maximum dimension and brightness throughout entire head"
        },
        "price": "180",
        "priceCurrency": "NZD",
        "priceSpecification": {
          "@type": "PriceSpecification",
          "price": "180",
          "priceCurrency": "NZD",
          "valueAddedTaxIncluded": true
        },
        "availability": "https://schema.org/InStock",
        "validFrom": "2024-01-01",
        "url": "https://hairbymelissa.co.nz/services/full-head-highlights"
      },
      {
        "@type": "Offer",
        "@id": "https://hairbymelissa.co.nz/services/half-head-highlights#offer",
        "itemOffered": {
          "@type": ["Service", "HealthAndBeautyBusiness"],
          "serviceType": "Hair Highlighting",
          "name": "Half Head of Highlights",
          "description": "Highlights applied to top and sides of hair for natural sun-kissed look. Perfect for creating dimension that grows out beautifully.",
          "category": "Hair Coloring",
          "duration": "PT2H15M",
          "serviceOutput": "Natural dimension through top and sides with seamless blend"
        },
        "price": "140",
        "priceCurrency": "NZD",
        "priceSpecification": {
          "@type": "PriceSpecification",
          "price": "140",
          "priceCurrency": "NZD",
          "valueAddedTaxIncluded": true
        },
        "availability": "https://schema.org/InStock",
        "validFrom": "2024-01-01",
        "url": "https://hairbymelissa.co.nz/services/half-head-highlights"
      },
      {
        "@type": "Offer",
        "@id": "https://hairbymelissa.co.nz/services/womens-cut-finish#offer",
        "itemOffered": {
          "@type": ["Service", "HealthAndBeautyBusiness"],
          "serviceType": "Hair Cutting and Styling",
          "name": "Women's Cut & Finish",
          "description": "Personalized haircut service including consultation, relaxing shampoo, precision cut, and professional styling tailored to your face shape and lifestyle.",
          "category": "Hair Cutting",
          "duration": "PT1H",
          "serviceOutput": "Precision haircut with professional styling"
        },
        "price": "50",
        "priceCurrency": "NZD",
        "priceSpecification": {
          "@type": "PriceSpecification",
          "price": "50",
          "priceCurrency": "NZD",
          "valueAddedTaxIncluded": true
        },
        "availability": "https://schema.org/InStock",
        "validFrom": "2024-01-01",
        "url": "https://hairbymelissa.co.nz/services/womens-cut-finish"
      },
      {
        "@type": "Offer",
        "@id": "https://hairbymelissa.co.nz/services/permanent-tint-all-over#offer",
        "itemOffered": {
          "@type": ["Service", "HealthAndBeautyBusiness"],
          "serviceType": "Hair Coloring",
          "name": "Permanent Tint & All Over Color",
          "description": "Full color application from roots to ends providing rich, vibrant, and even color throughout hair. Includes conditioning treatment.",
          "category": "Hair Coloring",
          "duration": "PT1H45M",
          "serviceOutput": "Rich, vibrant, even color from roots to ends"
        },
        "price": "140",
        "priceCurrency": "NZD",
        "priceSpecification": {
          "@type": "PriceSpecification",
          "price": "140",
          "priceCurrency": "NZD",
          "valueAddedTaxIncluded": true
        },
        "availability": "https://schema.org/InStock",
        "validFrom": "2024-01-01",
        "url": "https://hairbymelissa.co.nz/services/permanent-tint-all-over"
      },
      {
        "@type": "Offer",
        "@id": "https://hairbymelissa.co.nz/services/partial-foils#offer",
        "itemOffered": {
          "@type": ["Service", "HealthAndBeautyBusiness"],
          "serviceType": "Hair Highlighting",
          "name": "Partial Foils",
          "description": "Strategic highlights around face and crown to add dimension and brightness. Perfect for subtle change or low-maintenance color.",
          "category": "Hair Coloring",
          "duration": "PT1H15M",
          "serviceOutput": "Face-framing highlights with subtle dimension"
        },
        "price": "90",
        "priceCurrency": "NZD",
        "priceSpecification": {
          "@type": "PriceSpecification",
          "price": "90",
          "priceCurrency": "NZD",
          "valueAddedTaxIncluded": true
        },
        "availability": "https://schema.org/InStock",
        "validFrom": "2024-01-01",
        "url": "https://hairbymelissa.co.nz/services/partial-foils"
      },
      {
        "@type": "Offer",
        "@id": "https://hairbymelissa.co.nz/services/blow-wave#offer",
        "itemOffered": {
          "@type": ["Service", "HealthAndBeautyBusiness"],
          "serviceType": "Hair Styling",
          "name": "Blow Wave",
          "description": "Professional blow dry styling creating smooth, voluminous hair with incredible shine and movement. Perfect for special occasions.",
          "category": "Hair Styling",
          "duration": "PT50M",
          "serviceOutput": "Smooth, voluminous hair with professional finish"
        },
        "price": "50",
        "priceCurrency": "NZD",
        "priceSpecification": {
          "@type": "PriceSpecification",
          "price": "50",
          "priceCurrency": "NZD",
          "valueAddedTaxIncluded": true
        },
        "availability": "https://schema.org/InStock",
        "validFrom": "2024-01-01",
        "url": "https://hairbymelissa.co.nz/services/blow-wave"
      },
      {
        "@type": "Offer",
        "@id": "https://hairbymelissa.co.nz/services/toner#offer",
        "itemOffered": {
          "@type": ["Service", "HealthAndBeautyBusiness"],
          "serviceType": "Hair Toning",
          "name": "Toner",
          "description": "Professional toning service to neutralize unwanted tones, add depth, or refresh faded color. Ammonia-free formula.",
          "category": "Hair Treatment",
          "duration": "PT40M",
          "serviceOutput": "Refined and perfected hair color with enhanced tone"
        },
        "price": "40",
        "priceCurrency": "NZD",
        "priceSpecification": {
          "@type": "PriceSpecification",
          "price": "40",
          "priceCurrency": "NZD",
          "valueAddedTaxIncluded": true
        },
        "availability": "https://schema.org/InStock",
        "validFrom": "2024-01-01",
        "url": "https://hairbymelissa.co.nz/services/toner"
      },
      {
        "@type": "Offer",
        "@id": "https://hairbymelissa.co.nz/services/permanent-tint-touch-up#offer",
        "itemOffered": {
          "@type": ["Service", "HealthAndBeautyBusiness"],
          "serviceType": "Hair Coloring",
          "name": "Permanent Tint & Touch Up",
          "description": "Root touch-up service to refresh existing color and cover gray hair between full color appointments. Perfect for maintenance.",
          "category": "Hair Coloring",
          "duration": "PT1H15M",
          "serviceOutput": "Refreshed root color with seamless blend"
        },
        "price": "90",
        "priceCurrency": "NZD",
        "priceSpecification": {
          "@type": "PriceSpecification",
          "price": "90",
          "priceCurrency": "NZD",
          "valueAddedTaxIncluded": true
        },
        "availability": "https://schema.org/InStock",
        "validFrom": "2024-01-01",
        "url": "https://hairbymelissa.co.nz/services/permanent-tint-touch-up"
      }
    ]
  },
  "knowsAbout": [
    "Keratin Treatments",
    "Balayage Technique", 
    "Hair Highlighting",
    "Hair Coloring",
    "Hair Cutting",
    "Hair Styling",
    "Color Correction",
    "Hair Health",
    "Frizz Management"
  ],
  "serviceArea": {
    "@type": "GeoCircle",
    "geoMidpoint": {
      "@type": "GeoCoordinates",
      "latitude": -36.6173,
      "longitude": 174.4829
    },
    "geoRadius": "25000"
  },
  "aggregateRating": {
    "@type": "AggregateRating",
    "ratingValue": "5.0",
    "reviewCount": "47",
    "bestRating": "5",
    "worstRating": "1"
  },
  "review": [
    {
      "@type": "Review",
      "reviewRating": {
        "@type": "Rating",
        "ratingValue": "5"
      },
      "author": {
        "@type": "Person",
        "name": "Sarah Johnson"
      },
      "reviewBody": "Melissa transformed my dull, lifeless hair into a vibrant masterpiece. The keratin treatment was a game-changer!",
      "datePublished": "2024-01-15"
    },
    {
      "@type": "Review",
      "reviewRating": {
        "@type": "Rating",
        "ratingValue": "5"
      },
      "author": {
        "@type": "Person",
        "name": "Emma Wilson"
      },
      "reviewBody": "Best balayage I've ever had! Melissa really knows her craft and the salon atmosphere is so relaxing.",
      "datePublished": "2024-02-03"
    }
  ],
  "sameAs": [
    "https://www.facebook.com/hairbymelissa",
    "https://www.instagram.com/hairbymelissa_nz",
    "https://www.google.com/maps/place/Hair+By+Melissa"
  ],
  "mainEntityOfPage": "https://hairbymelissa.co.nz",
  "potentialAction": {
    "@type": "ReserveAction",
    "target": {
      "@type": "EntryPoint",
      "urlTemplate": "https://hairbymelissa.co.nz/booking",
      "actionPlatform": [
        "https://schema.org/DesktopWebPlatform",
        "https://schema.org/MobileWebPlatform"
      ]
    },
    "result": {
      "@type": "Reservation",
      "name": "Hair Appointment Booking"
    }
  }
};

// GEO Optimization Context for LLMs
const geoContext = {
  "@context": "https://schema.org",
  "@type": "WebPage",
  "about": {
    "@type": "HairSalon",
    "name": "Hair By Melissa"
  },
  "keywords": keywords,
  "contentLocation": {
    "@type": "Place",
    "name": "Kaukapakapa, Auckland, New Zealand"
  },
  "spatialCoverage": {
    "@type": "Place",
    "name": "North Auckland including Kaukapakapa, Helensville, Wainui, and Waitoki"
  }
};

// Enhanced Local Entity Recognition Schema for 2024 GEO
const localEntitySchema = {
  "@context": "https://schema.org",
  "@type": ["Place", "LocalBusiness", "HairSalon"],
  "@id": "https://hairbymelissa.co.nz/#place",
  "identifier": "hair-by-melissa-kaukapakapa",
  "name": "Hair By Melissa",
  "alternateName": ["Melissa's Hair Salon Kaukapakapa", "Kaukapakapa Hair Salon"],
  "description": "Premier hair salon in Kaukapakapa village specializing in keratin treatments, balayage, and expert hair coloring. Serving North Auckland including Helensville, Wainui, and Waitoki.",
  
  // Enhanced Geographic Entities (Critical for GEO 2024)
  "containedInPlace": [
    {
      "@type": "AdministrativeArea",
      "name": "Kaukapakapa",
      "alternateName": ["Kaukapakapa Village", "Kaukapakapa Township"],
      "containedInPlace": {
        "@type": "AdministrativeArea", 
        "name": "Auckland Region",
        "alternateName": ["North Auckland", "Greater Auckland"]
      }
    }
  ],
  
  // Near Me Query Optimization
  "additionalProperty": [
    {
      "@type": "PropertyValue",
      "name": "Primary Service Area",
      "value": "Kaukapakapa, Helensville, Wainui, Waitoki"
    },
    {
      "@type": "PropertyValue", 
      "name": "Search Intent Keywords",
      "value": "hair salon near me, hairdresser near me, keratin treatment near me, balayage near me"
    },
    {
      "@type": "PropertyValue",
      "name": "Local Specialties", 
      "value": "Village salon, Rural hair care, Coastal climate hair treatments"
    }
  ],

  // Voice Search Optimization Schema
  "potentialAction": [
    {
      "@type": "SearchAction",
      "query-input": "required name=search_term_string",
      "target": "https://hairbymelissa.co.nz/search?q={search_term_string}"
    },
    {
      "@type": "FindAction",
      "object": {
        "@type": "HairSalon",
        "name": "Hair By Melissa"
      },
      "location": {
        "@type": "Place",
        "name": "Kaukapakapa, Auckland"
      }
    }
  ],

  // Enhanced Availability Schema for Local Search
  "specialOpeningHoursSpecification": [
    {
      "@type": "OpeningHoursSpecification",
      "opens": "09:00",
      "closes": "17:00", 
      "dayOfWeek": ["Tuesday", "Wednesday", "Thursday", "Friday"],
      "validFrom": "2024-01-01",
      "validThrough": "2024-12-31"
    }
  ]
};

// Local Event & Community Integration Schema
const localEventSchema = {
  "@context": "https://schema.org",
  "@type": "Organization", 
  "@id": "https://hairbymelissa.co.nz/#organization",
  "name": "Hair By Melissa",
  "memberOf": [
    {
      "@type": "Organization",
      "name": "Kaukapakapa Business Association",
      "description": "Local business community supporting Kaukapakapa village"
    },
    {
      "@type": "Organization", 
      "name": "North Auckland Chamber of Commerce",
      "description": "Regional business network"
    }
  ],
  "knowsAbout": [
    {
      "@type": "Place",
      "name": "Kaukapakapa Pioneer Village",
      "description": "Historic village attraction near our salon"
    },
    {
      "@type": "Event",
      "name": "Kaukapakapa Country Fair",
      "description": "Annual community event where we participate"
    },
    {
      "@type": "Place",
      "name": "Helensville Agricultural & Pastoral Show", 
      "description": "Regional event serving our client community"
    }
  ],
  "audience": [
    {
      "@type": "Audience",
      "audienceType": "Local Residents",
      "geographicArea": {
        "@type": "AdministrativeArea",
        "name": "Kaukapakapa and surroundings"
      }
    },
    {
      "@type": "Audience",
      "audienceType": "Rural Community",
      "geographicArea": {
        "@type": "AdministrativeArea", 
        "name": "North Auckland Rural"
      }
    },
    {
      "@type": "Audience",
      "audienceType": "Lifestyle Block Owners",
      "geographicArea": {
        "@type": "AdministrativeArea",
        "name": "Rodney District"
      }
    }
  ]
};
---

<!DOCTYPE html>
<html lang="en-NZ">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    
    <!-- Performance: Preconnect to Google Fonts for faster loading -->
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    
    <!-- Core Web Vitals: Critical CSS inlined for mobile LCP -->
    <style>
      /* Critical Mobile-First CSS inlined for fastest LCP */
      :root{--salon-blue:#D3E4FD;--salon-pink:#FFDEE2;--salon-lightgray:#F8F9FA;--salon-darkblue:#0B7BA7;--gradient-primary:linear-gradient(135deg,#D3E4FD 0%,#FFDEE2 100%);--shadow-md:0 5px 15px rgba(0,0,0,0.08);--transition-base:all 0.3s cubic-bezier(0.4,0,0.2,1)}body{font-family:system-ui,-apple-system,'Segoe UI','Inter',sans-serif;font-size:16px;line-height:1.6;color:#333;-webkit-font-smoothing:antialiased;margin:0;padding:0}.container-custom{max-width:100%;margin:0 auto;padding:0 1rem}@media (min-width:768px){.container-custom{max-width:1200px;padding:0 2rem}}.hero-section{position:relative;min-height:100vh;display:flex;align-items:center;overflow:hidden}.hero-content{position:relative;z-index:10;padding-top:5rem;max-width:100%}.hero-title{font-size:2.5rem;font-weight:700;line-height:1.2;color:white;margin-bottom:1rem}@media (min-width:768px){.hero-title{font-size:3.5rem}}@media (min-width:1024px){.hero-title{font-size:4rem}}.gradient-text{background:linear-gradient(135deg,#D3E4FD 0%,#FFDEE2 100%);-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text}.btn-primary{display:inline-block;background:linear-gradient(135deg,#0B7BA7 0%,#D3E4FD 100%);color:white;font-weight:600;padding:0.75rem 1.5rem;border-radius:0.5rem;text-decoration:none;transition:transform 0.2s ease,box-shadow 0.2s ease;border:none;cursor:pointer}.btn-primary:hover{transform:translateY(-2px);box-shadow:0 10px 25px rgba(11,123,167,0.3)}.navbar{position:fixed;top:0;left:0;right:0;z-index:1000;background:rgba(255,255,255,0.95);backdrop-filter:blur(10px);-webkit-backdrop-filter:blur(10px);padding:1rem;transition:background-color 0.3s ease}.navbar-content{display:flex;justify-content:space-between;align-items:center;max-width:1200px;margin:0 auto}.logo{font-size:1.5rem;font-weight:700;color:#333;text-decoration:none}.loading-placeholder{background:linear-gradient(90deg,#f0f0f0 25%,#e0e0e0 50%,#f0f0f0 75%);background-size:200% 100%;animation:loading-shimmer 1.5s infinite}@keyframes loading-shimmer{0%{background-position:-200% 0}100%{background-position:200% 0}}.critical-image{width:100%;height:auto;display:block;background:linear-gradient(135deg,#f5f5f5,#eeeeee)}.mobile-menu-toggle{display:block;background:none;border:none;cursor:pointer;padding:0.5rem}@media (min-width:768px){.mobile-menu-toggle{display:none}}.sr-only{position:absolute;width:1px;height:1px;padding:0;margin:-1px;overflow:hidden;clip:rect(0,0,0,0);white-space:nowrap;border:0}.text-center{text-align:center}.hidden{display:none}.flex{display:flex}.items-center{align-items:center}.justify-between{justify-content:space-between}.relative{position:relative}.absolute{position:absolute}.inset-0{top:0;right:0;bottom:0;left:0}.z-10{z-index:10}.grid{display:grid}.grid-cols-1{grid-template-columns:repeat(1,minmax(0,1fr))}.gap-4{gap:1rem}.gap-8{gap:2rem}@media (min-width:768px){.md\\:grid-cols-2{grid-template-columns:repeat(2,minmax(0,1fr))}}@media (min-width:1024px){.lg\\:grid-cols-3{grid-template-columns:repeat(3,minmax(0,1fr))}}.p-4{padding:1rem}.py-3{padding-top:0.75rem;padding-bottom:0.75rem}.px-6{padding-left:1.5rem;padding-right:1.5rem}.mb-4{margin-bottom:1rem}.mb-6{margin-bottom:1.5rem}.mb-8{margin-bottom:2rem}.mt-4{margin-top:1rem}.mt-6{margin-top:1.5rem}.mt-8{margin-top:2rem}.mt-20{margin-top:5rem}.bg-white{background-color:#ffffff}.bg-transparent{background-color:transparent}.text-white{color:#ffffff}.text-gray-600{color:#6b7280}.text-gray-700{color:#374151}.text-xl{font-size:1.25rem;line-height:1.75rem}.text-4xl{font-size:2.25rem;line-height:2.5rem}.text-5xl{font-size:3rem;line-height:1}@media (min-width:768px){.md\\:text-6xl{font-size:3.75rem;line-height:1}}.font-bold{font-weight:700}.font-medium{font-weight:500}.font-semibold{font-weight:600}.rounded-md{border-radius:0.375rem}.border-2{border-width:2px}.border-white{border-color:#ffffff}@media (hover:hover){.btn-primary:hover{transform:translateY(-2px)}}.btn-primary:focus,.navbar a:focus{outline:2px solid #0B7BA7;outline-offset:2px}
    </style>
    
    <!-- Primary Meta Tags -->
    <title>{title} | Hair By Melissa - Premium Hairdresser Kaukapakapa</title>
    <meta name="title" content={`${title} | Hair By Melissa - Premium Hairdresser Kaukapakapa`} />
    <meta name="description" content={description} />
    <meta name="keywords" content={keywords} />
    <meta name="author" content="Hair By Melissa" />
    <meta name="robots" content="index, follow, max-image-preview:large, max-snippet:-1, max-video-preview:-1" />
    <meta name="language" content="English" />
    <meta name="revisit-after" content="7 days" />
    
    <!-- Canonical URL -->
    <link rel="canonical" href={canonicalURL} />
    
    <!-- Optimized font loading for Core Web Vitals -->
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    
    <!-- DNS prefetch for faster asset loading -->
    <link rel="dns-prefetch" href="https://fonts.googleapis.com" />
    
    <!-- Non-blocking font loading with combined request -->
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=Playfair+Display:wght@400;500;600;700&display=swap" media="print" onload="this.media='all'" />
    <noscript>
      <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=Playfair+Display:wght@400;500;600;700&display=swap" />
    </noscript>
    
    <!-- Favicons & PWA -->
    <link rel="icon" type="image/svg+xml" href="/favicon.svg" />
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png" />
    <link rel="manifest" href="/manifest.json" />
    <meta name="theme-color" content="#0B7BA7" />
    
    <!-- Open Graph / Facebook -->
    <meta property="og:type" content={pageType} />
    <meta property="og:url" content={canonicalURL} />
    <meta property="og:title" content={`${title} | Hair By Melissa`} />
    <meta property="og:description" content={description} />
    <meta property="og:image" content={ogImage} />
    <meta property="og:image:width" content="1200" />
    <meta property="og:image:height" content="630" />
    <meta property="og:site_name" content="Hair By Melissa" />
    <meta property="og:locale" content="en_NZ" />
    
    <!-- Twitter -->
    <meta property="twitter:card" content="summary_large_image" />
    <meta property="twitter:url" content={canonicalURL} />
    <meta property="twitter:title" content={`${title} | Hair By Melissa`} />
    <meta property="twitter:description" content={description} />
    <meta property="twitter:image" content={ogImage} />
    
    <!-- Geo Tags for Local SEO -->
    <meta name="geo.region" content="NZ-AUK" />
    <meta name="geo.placename" content="Kaukapakapa" />
    <meta name="geo.position" content="-36.6173;174.4829" />
    <meta name="ICBM" content="-36.6173, 174.4829" />
    
    <!-- Enhanced Local Entity Recognition Meta Tags -->
    <meta name="geo.placename" content="Kaukapakapa Village, Auckland, New Zealand" />
    <meta name="geo.county" content="Auckland Region" />
    <meta name="geo.district" content="Rodney District" />
    <meta name="NUTS" content="NZ011" />

    <!-- Local Search Intent Optimization -->
    <meta name="local-search-intent" content="hair salon near me, hairdresser near me, keratin treatment kaukapakapa, balayage helensville" />
    <meta name="service-locality" content="Kaukapakapa, Helensville, Wainui, Waitoki, North Auckland" />

    <!-- Voice Search Optimization -->
    <meta name="voice-search-queries" content="hair salon near me, best hairdresser kaukapakapa, keratin treatment north auckland, where to get balayage" />
    <meta name="natural-language-queries" content="find hair salon kaukapakapa, book hair appointment near me, keratin treatment specialist" />

    <!-- Local Business Entity Signals -->
    <meta name="local-business-type" content="HairSalon, BeautySalon, LocalBusiness" />
    <meta name="establishment-year" content="2020" />
    <meta name="owner-operator" content="Melissa" />
    <meta name="local-community" content="Kaukapakapa Village Community" />
    
    <!-- Business Information -->
    <meta name="business:contact_data:street_address" content="Magnolia Lane" />
    <meta name="business:contact_data:locality" content="Kaukapakapa" />
    <meta name="business:contact_data:region" content="Auckland" />
    <meta name="business:contact_data:postal_code" content="0810" />
    <meta name="business:contact_data:country_name" content="New Zealand" />
    
    <!-- DNS Prefetch for mobile performance -->
    <link rel="dns-prefetch" href="https://www.google.com" />
    <link rel="dns-prefetch" href="https://maps.googleapis.com" />
    
    <!-- Structured Data - LocalBusiness Schema -->
    <script type="application/ld+json" set:html={JSON.stringify(localBusinessSchema)} />
    
    <!-- Enhanced Local Entity Recognition Schema -->
    <script type="application/ld+json" set:html={JSON.stringify(localEntitySchema)} />
    
    <!-- Local Event & Community Integration Schema -->
    <script type="application/ld+json" set:html={JSON.stringify(localEventSchema)} />
    
    <!-- GEO Context for LLMs -->
    <script type="application/ld+json" set:html={JSON.stringify(geoContext)} />
    
    <!-- Additional SEO Context for AI/LLMs -->
    <meta name="ai-content-description" content="Hair By Melissa is a premium hair salon located in Kaukapakapa, Auckland, New Zealand. We specialize in professional hair services including keratin treatments ($180), balayage ($230), highlights (from $90), hair coloring, and women's cuts ($50). Our expert hairdresser Melissa serves clients from Kaukapakapa, Helensville, Wainui, and Waitoki areas. Book your appointment for a hair transformation today!" />
    <meta name="service-areas" content="Kaukapakapa, Helensville, Wainui, Waitoki, North Auckland, Rodney District" />
    <meta name="price-range" content="NZD $40-$230" />
    
    <!-- Domain Authority Consolidation -->
    <meta name="domain-authority" content="hairbymelissa.co.nz" />
    <meta name="canonical-domain" content="hairbymelissa.co.nz" />
    
    <!-- HSTS for HTTPS enforcement (helps with domain authority) -->
    <meta http-equiv="Strict-Transport-Security" content="max-age=31536000; includeSubDomains; preload" />
    
    <!-- Lazy load non-critical CSS -->
    <script>
      // Load non-critical CSS after initial render
      const loadCSS = (href) => {
        const link = document.createElement('link');
        link.rel = 'stylesheet';
        link.href = href;
        link.media = 'print';
        link.onload = () => { link.media = 'all'; };
        document.head.appendChild(link);
      };
      
      // Load on DOMContentLoaded for faster perceived performance
      document.addEventListener('DOMContentLoaded', () => {
        // Add slight delay to ensure critical render is complete
        setTimeout(() => {
          // Mark non-critical content as loaded
          const nonCritical = document.querySelectorAll('.non-critical');
          nonCritical.forEach(el => el.classList.add('loaded'));
        }, 100);
      });
    </script>
    
  </head>
  <body>
    <LoadingSpinner />
    <Navbar />
    <main>
      <slot />
    </main>
    <Footer />
    
    <!-- Core Web Vitals: Defer JavaScript for mobile FID -->
    <script>
      // Load scripts after critical rendering
      window.addEventListener('load', function() {
        // Defer animation script
        const animationScript = document.createElement('script');
        animationScript.src = '/src/scripts/animations.js';
        document.body.appendChild(animationScript);
        
        // Defer image optimization script
        const imageScript = document.createElement('script');
        imageScript.src = '/src/scripts/image-optimization.js';
        document.body.appendChild(imageScript);
        
        // Defer local SEO and geolocation script
        const localSeoScript = document.createElement('script');
        localSeoScript.src = '/src/scripts/local-seo.js';
        document.body.appendChild(localSeoScript);
      });
    </script>
  </body>
</html>